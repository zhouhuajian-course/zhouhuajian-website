# 域名解析

### 域名解析过程

    TTL Time To Live 、 注册商的域名服务器
    
    例如浏览器访问www.baidu.com
    
    1. 浏览器先检查浏览器缓存中有没有www.baidu.com对应的ip地址。
       如果有，解析结束。
       （如果之前访问过www.baidu.com，浏览器的缓存时间是域名解析设置时的TTL时间，
       TTL设置10分钟，浏览器就缓存10分钟，TTL设置1小时，浏览器就缓存1小时，
       也就是解析过一次www.baidu.com，1小时内再次访问www.baidu.com都使用浏览器缓存就解析结束了。）
    2. 如果浏览器缓存没有，则会走一下电脑的域名系统，
       Windows系统是C:\Windows\System32\drivers\etc\hosts
       Linux系统是/etc/hosts
       如果有设置www.baidu.com对应的ip地址，解析结束。
    3. 如果电脑的域名系统没有，则会请求本地的域名服务器（Local DNS Server）来解析www.baidu.com，
       这台服务器一般就在你的附近，例如你在东莞，那么一般就在东莞的某个角落，
       这台服务器也会有域名解析缓存，
       例如城市东莞的其他人访问了www.baidu.com，这台服务器就把www.baidu.com对应的ip地址缓存了，
       那么你去找www.baidu.com的ip时，就可直接使用它的缓存，
       大约80%的域名解析到这里就完成了。
       （它的缓存时间，也是域名解析设置时的TTL）
     4. 如果本地的域名服务器没有，就直接跳到Root DNS Server根域名服务器请求解析
        (根域名服务器由注册局维护)
        根域名服务器不会提供www.baidu.com的ip地址，它只提供顶级域名.com的顶级域名服务器地址gTLD Server
     5. 本地的域名服务器拿到.com的顶级域名服务器地址后，去请求顶级域名服务器
       （顶级域名服务器由注册局维护）
        顶级域名服务器不会提供www.baidu.com的ip地址，它只提供www.baidu.com的域名服务器地址Name Server
     6. 本地的域名服务器拿到www.baidu.com的域名服务器地址后，去访问www.baidu.com的域名服务器
        (域名服务器一般由注册商提供，但一些大公司也会使用公司自己搭建的域名服务器，例如淘宝、百度)
     7. www.baidu.com的域名服务器会把www.baidu.com的ip提供给本地域名服务器，
        本地域名服务器将IP返回给浏览器，
        并且本地域名服务器根据TTL进行缓存
     8. 浏览器拿到本地域名服务器解析到的ip后，解析结束。
        浏览器会根据TTL进行缓存www.baidu.com的ip。
        
     域名解析结束后，
     浏览器通过www.baidu.com对应的ip，
     去www.baidu.com的网站服务器
     请求www.baidu.com的网页内容。
 
        
### 前提

    根据国家规定，需要域名实名认证后，才能进行域名解析
    先把域名实名认证了，不然没实名认证，设置了解析也不会生效
    
### 注意点

    如果域名已实名认证，设置解析后，10分钟内一般就能生效
    如果域名没实名认证，例如没申请实名认证或者实名认证审核中还未通过审核，设置解析后，不会生效。如果后面通过了实名认证，那么之前设置的解析一般要1天内才能生效，
    当然通过实名认证后，你可以马上去更新之前设置过的域名解析，例如删掉重新设置，那么10分钟内一般就能生效。
